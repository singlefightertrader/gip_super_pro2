<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GIP V5 Â· AI SHIELDED SNIPER</title>
<style>
:root{
--bg:#050608;--card:#0d1117;--accent:#00eaff;
--green:#00ff99;--red:#ff4d4d;--yellow:#ffcc00;--border:#1f2937;
}
body{margin:0;font-family:Arial;background:var(--bg);color:#e6edf3;padding:15px;}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:15px;margin-bottom:15px;}
input{width:100%;background:#000;border:1px solid var(--border);color:#fff;padding:8px;margin-bottom:8px;border-radius:6px;}
button{width:100%;padding:12px;border:none;border-radius:8px;background:var(--accent);color:#000;font-weight:bold;cursor:pointer;}
.res{padding:15px;border-radius:12px;text-align:center;margin-bottom:10px;}
.green{background:rgba(0,255,153,0.1);border:1px solid var(--green);color:var(--green);}
.red{background:rgba(255,77,77,0.1);border:1px solid var(--red);color:var(--red);}
.yellow{background:rgba(255,204,0,0.1);border:1px solid var(--yellow);color:var(--yellow);}
.gray{background:#111;border:1px solid #333;color:#888;}
.copy{background:#222;color:var(--accent);border:none;padding:4px 8px;font-size:10px;border-radius:4px;cursor:pointer;}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.m5{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;}
</style>
</head>
<body>

<div class="card">
<b>STRUCTURE (H1 - M15)</b>
<div class="grid">
<input id="h1h" placeholder="H1 High">
<input id="h1l" placeholder="H1 Low">
<input id="m30h" placeholder="M30 High">
<input id="m30l" placeholder="M30 Low">
<input id="m15h" placeholder="M15 High">
<input id="m15l" placeholder="M15 Low">
</div>
<div class="grid">
<input id="h4h" placeholder="H4 High (optional)">
<input id="h4l" placeholder="H4 Low (optional)">
<input id="h2h" placeholder="H2 High (block)">
<input id="h2l" placeholder="H2 Low (block)">
</div>
<button onclick="lock()">LOCK CORE</button>
</div>

<div class="card">
<b>M5 SEQUENCE (12 CLOSED CANDLES)</b>
<div class="m5">
<input id="m1"><input id="m2"><input id="m3"><input id="m4">
<input id="m5_5"><input id="m6"><input id="m7"><input id="m8">
<input id="m9"><input id="m10"><input id="m11"><input id="m12">
</div>
<button onclick="run()">ANALYZE</button>
</div>

<div id="status" class="res gray">WAITING</div>

<div class="card">
<div>ENTRY: <span id="ep">-</span> <button class="copy" onclick="cp('ep')">Copy</button></div>
<div>SL: <span id="sl">-</span> <button class="copy" onclick="cp('sl')">Copy</button></div>
<div>TP: <span id="tp">-</span> <button class="copy" onclick="cp('tp')">Copy</button></div>
</div>

<script>
let lv=null;

function lock(){
let ids=['h1h','h1l','m30h','m30l','m15h','m15l'];
let v=ids.map(id=>parseFloat(document.getElementById(id).value));
if(v.some(isNaN)) return alert("Structure belum lengkap");
lv={H1:{h:v[0],l:v[1]},M30:{h:v[2],l:v[3]},M15:{h:v[4],l:v[5]}};
alert("CORE LOCKED");
}

function cp(id){
let val=document.getElementById(id).innerText;
if(val!="-") navigator.clipboard.writeText(val);
}

function run(){
if(!lv) return;
let arr=[];
for(let i=1;i<=12;i++){
let id=i==5?"m5_5":"m"+i;
let val=parseFloat(document.getElementById(id).value);
if(!isNaN(val)) arr.push(val);
}
if(arr.length<12) return;

let price=arr[11],prev=arr[10],prev2=arr[9];

let h2h=parseFloat(document.getElementById("h2h").value);
let h2l=parseFloat(document.getElementById("h2l").value);
if(!isNaN(h2h)&&!isNaN(h2l)&&price>h2l&&price<h2h){
document.getElementById("status").className="res gray";
document.getElementById("status").innerText="H2 BLOCK";
return;
}

let getB=(l)=> (price>l.h&&prev>l.h)?"BUY":(price<l.l&&prev<l.l)?"SELL":"WAIT";
let h1B=getB(lv.H1),m30B=getB(lv.M30);
let bias=(h1B!=="WAIT"&&(m30B===h1B||m30B==="WAIT"))?h1B:"WAIT";

let pressure=0,side=null;
for(let i=arr.length-1;i>=0;i--){
if(arr[i]>lv.M15.h){if(side==="SELL")break;side="BUY";pressure++;}
else if(arr[i]<lv.M15.l){if(side==="BUY")break;side="SELL";pressure++;}
else break;
}

let validBreak=(h1B==="BUY"&&prev2>lv.H1.h&&price>lv.H1.h)||(h1B==="SELL"&&prev2<lv.H1.l&&price<lv.H1.l);

let gear="WAIT";
if(validBreak&&bias!=="WAIT"){
if(pressure>=3) gear="GOLDEN";
else if(pressure>=2) gear="SCALP";
}

let h4h=parseFloat(document.getElementById("h4h").value);
let h4l=parseFloat(document.getElementById("h4l").value);
if(!isNaN(h4h)&&!isNaN(h4l)){
let pos=(price-h4l)/(h4h-h4l);
if((bias==="BUY"&&pos>0.85)||(bias==="SELL"&&pos<0.15)){
gear="SCALP";
}
}

if(gear==="WAIT"){
document.getElementById("status").className="res gray";
document.getElementById("status").innerText="WAIT";
return;
}

let hi=Math.max(...arr.slice(-3)),lo=Math.min(...arr.slice(-3));
let ep=bias==="BUY"?lo+(hi-lo)*0.3:hi-(hi-lo)*0.3;
let sl=gear==="GOLDEN"?(bias==="BUY"?lv.H1.l:lv.H1.h):(bias==="BUY"?lv.M15.l:lv.M15.h);
let tp=bias==="BUY"?ep+(Math.abs(ep-sl)*2):ep-(Math.abs(ep-sl)*2);

document.getElementById("ep").innerText=ep.toFixed(5);
document.getElementById("sl").innerText=sl.toFixed(5);
document.getElementById("tp").innerText=tp.toFixed(5);

let touched=(bias==="BUY"&&price<=ep)||(bias==="SELL"&&price>=ep);

if(touched){
document.getElementById("status").className=bias==="BUY"?"res green":"res red";
document.getElementById("status").innerText=gear+" "+bias+" VALID";
}else{
document.getElementById("status").className="res yellow";
document.getElementById("status").innerText="WAIT PULLBACK ("+gear+")";
}
}
</script>

</body>
</html>
